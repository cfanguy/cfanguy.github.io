<!DOCTYPE html>
<html>
    <head>
        <title>cfanguy github.io</title>
        <link href='https://api.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.css' rel='stylesheet' />
        <link rel="stylesheet" type="text/css" href="css/indexStyles.css">
    </head>
    <body>
        <div>
            <span id="title" class="center">Chad Fanguy's Github.io</span>
        </div>
        <div class="initialBlock fullWidth center">
            <img class="center" src="./images/icon.png" width="288" height="129" alt="" />
        </div>
        <div>
            <div>
                <br><br>
                <span class="initialBlock text">Links:</span><br>
                <a class="marginTab text" href="https://github.com/cfanguy">Github</a><br>
                <a class="marginTab text" href="https://cfanguy.wordpress.com/">Blog</a><br><br>
                <a class="marginTab text" title="Rock Bottom Innovations" href="http://cfanguy.github.io/platformer/">RBI</a>
                <span class="marginSpace text">Rock Bottom Innovations (RBI) was a simple HTML5 game made to test HTML5 Canvas.</span>
            </div>
            <br><br>
            <div>
                <span class="text title">Locations I Have Visited (3D Map Framework by MapBox):</span><br>
                <div class="mapContainer">
                    <div id="map" style="width: 100%;height: 550px;" class="borderRad"></div>
                </div>
            </div>
        </div>

        <script src='https://api.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.js'></script>
        <script>
            var locations = [];

            // Alabama
            locations.push({ x: -87.8864, y: 30.6311, event: "Work", loc: "Daphne" });
            locations.push({ x: -86.5850, y: 34.7300, event: "Vacation", loc: "Huntsville" });

            // California
            locations.push({ x: -117.1625, y: 32.7150, event: "ESRI User Conference 2015", loc: "San Diego" });

            // Florida
            locations.push({ x: -81.2989, y: 28.4158, event: "Disney World & Residence", loc: "Orlando" });
            locations.push({ x: -84.2533, y: 30.4550, event: "Vacation", loc: "Tallahassee" });
            locations.push({ x: -82.5458, y: 27.7625, event: "Convention", loc: "Tampa" });
            locations.push({ x: -80.6077, y: 28.3922, event: "Kennedy Space Center", loc: "Cape Canaveral" });
            locations.push({ x: -80.2241, y: 25.7877, event: "Vacation", loc: "Miami" });

            // Georgia
            locations.push({ x: -84.3880, y: 33.7490, event: "MS Ignite 2016", loc: "Atlanta" });
            locations.push({ x: -84.3241, y: 34.8640, event: "Vacation", loc: "Blue Ridge" });

            // Louisiana
            locations.push({ x: -90.6053, y: 29.7225, event: "Birth City", loc: "Raceland" });
            locations.push({ x: -93.2086, y: 30.2147, event: "Conventions", loc: "Lake Charles" });
            locations.push({ x: -90.0500, y: 29.9667, event: "Conventions and Random Visits", loc: "New Orleans" });
            locations.push({ x: -90.8200, y: 29.7922, event: "Former Residence", loc: "Thibodaux" });
            locations.push({ x: -90.7161, y: 29.5875, event: "Family", loc: "Houma" });
            locations.push({ x: -91.1400, y: 30.4500, event: "Family", loc: "Baton Rouge" });
            locations.push({ x: -91.1972, y: 29.7008, event: "Family", loc: "Morgan City Area" });
            locations.push({ x: -90.4656, y: 30.5044, event: "Renaissance Festival", loc: "Hammond" });
            locations.push({ x: -92.0333, y: 30.2167, event: "Former Residence", loc: "Lafayette" });
            locations.push({ x: -93.7472, y: 32.5147, event: "Work", loc: "Shreveport" });

            // Mississippi
            locations.push({ x: -88.9278, y: 30.4119, event: "Vacation", loc: "Biloxi" });

            // Nevada
            locations.push({ x: -115.1739, y: 36.1215, event: "Vacation", loc: "Las Vegas and Grand Canyon" });

            // New York
            locations.push({ x: -77.0367, y: 38.8951, event: "4th of July and Work", loc: "Washington D.C." });
            locations.push({ x: -74.0059, y: 40.7127, event: "Macy's Day Parade", loc: "New York City" });

            // Tennessee
            locations.push({ x: -86.7833, y: 36.1667, event: "Vacation", loc: "Nashville" });
            locations.push({ x: -85.2672, y: 35.0456, event: "Vacation", loc: "Chattanooga" });
            locations.push({ x: -83.5102, y: 35.7143, event: "Great Smoky Mountains National Park Visit", loc: "Gatlinburg" });

            // Texas
            locations.push({ x: -96.7970, y: 32.7767, event: "Airport", loc: "Dallas" });
            locations.push({ x: -98.5000, y: 29.4167, event: "Vacation", loc: "San Antonio" });
            locations.push({ x: -95.3831, y: 29.7628, event: "MS TechEd 2014", loc: "Houston" });
            locations.push({ x: -97.7431, y: 30.2672, event: "Work", loc: "Austin" });

            mapboxgl.accessToken = 'pk.eyJ1IjoiY2Zhbmd1eSIsImEiOiJjamgybzQ1MjYwN2VpMnFvM2Z6czhpbHZsIn0.aqLEqzNIZ9K4tsOc_Z01BA';
            var map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/light-v9',
                center: [-95.00956023296817, 33.43899377692047],
                zoom: 3.9,
                pitch: 60
            });

            map.on('load', function() {
                var features = [];

                for (var i = 0; i < locations.length; i++) {
                    features.push({
                        "type": "Feature",
                        "properties": {
                            "description": "<span>" + locations[i].loc + " - " + locations[i].event + "<span>",
                            "icon": "marker"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [locations[i].x, locations[i].y]
                        }
                    });
                }

                map.addLayer({
                    "id": "places",
                    "type": "symbol",
                    "source": {
                        "type": "geojson",
                        "data": {
                            "type": "FeatureCollection",
                            "features": features
                        }
                    },
                    "layout": {
                        "icon-image": "{icon}-15",
                        "icon-allow-overlap": true
                    }
                });

                map.on('click', 'places', function (e) {
                    var coordinates = e.features[0].geometry.coordinates.slice();
                    var description = e.features[0].properties.description;

                    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
                    }

                    new mapboxgl.Popup()
                        .setLngLat(coordinates)
                        .setHTML(description)
                        .addTo(map);
                });

                map.on('mouseenter', 'places', function () {
                    map.getCanvas().style.cursor = 'pointer';
                });

                map.on('mouseleave', 'places', function () {
                    map.getCanvas().style.cursor = '';
                });
            });
        </script>
    </body>
</html>
